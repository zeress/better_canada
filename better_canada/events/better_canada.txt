add_namespace = better_canada

# Canada Demands Alaska
country_event = {
	id = better_canada.1
	title = better_canada.1.t
	desc = better_canada.1.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.20.a	# Very Well...
		ai_chance = { factor = 10 }

		CAN = {
			transfer_state = 463
		}
		hidden_effect = {
			news_event = { id = better_canada.30 hours = 6 }
		}
	}
	
	option = {
		name = better_canada.20.b	#no way 
		ai_chance = { factor = 90 }
		add_political_power = -50
		
		CAN = {
			create_wargoal = {
				type = take_state_focus
				target = USA
				generator = { 463 }
			}
		}
		hidden_effect = {
			news_event = { id = better_canada.31 hours = 6 }
		}
	}
}

# Canada Demands Newfoundland and Labrador
country_event = {
	id = better_canada.20
	title = better_canada.20.t
	desc = better_canada.20.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.20.a	# Very Well...
		ai_chance = { factor = 20 }

		CAN = {
			transfer_state = 331
			transfer_state = 332
		}
		hidden_effect = {
			news_event = { id = better_canada.40 hours = 6 }
		}
	}
	
	option = {
		name = better_canada.20.b	#no way 
		ai_chance = { factor = 80 }
		add_political_power = -50

		CAN = {
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 331 332 }
			}
		}
		hidden_effect = {
			news_event = { id = better_canada.41 hours = 6 }
		}
	}
}

country_event = { # Consider your options
	id = better_canada.21
	title = better_canada.21.t
	desc = better_canada.21.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.21.a	# Do it diplomatically
		ai_chance = { factor = 70 }

		ENG = { country_event = { id = better_canada.22 } }
	}
	
	option = {
		name = better_canada.21.b	# Just demand it
		ai_chance = { factor = 30 }

		
		CAN = { # New Brunswick
			custom_effect_tooltip = CAN_east_claims_forts
			hidden_effect = {
				465 = { # New Brunswick
					add_building_construction = {
						type = bunker
						level = 4
						province = 4285
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 4285
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		hidden_effect = {
			466 = { # Quebec
				add_building_construction = {
					type = bunker
					level = 4
					province = 3208
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 7683
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 7810
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 10534
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 12600
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
			468 = { # Saint Lawrence
				add_building_construction = {
					type = bunker
					level = 4
					province = 12149
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					province = 12149
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
			464 = { # Nova Scotia
				add_building_construction = {
					type = coastal_bunker
					level = 4
					province = 7361
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}		
		ENG = { country_event = { id = better_canada.20 } }
	}
}

country_event = { # The UK considers
	id = better_canada.22
	title = better_canada.22.t
	desc = better_canada.22.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.22.a	# Accept the Referendum
		ai_chance = { factor = 70 }

		CAN = {
			transfer_state = 331
			transfer_state = 332
		}
		hidden_effect = {
			news_event = { id = better_canada.23 hours = 6 }
		}
	}
	
	option = {
		name = better_canada.22.b	# Deny the Referendum
		ai_chance = { factor = 30 }

		CAN = {
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 331 332 }
			}
		}		
		
		CAN = { # New Brunswick
			custom_effect_tooltip = CAN_east_claims_forts
			hidden_effect = {
				465 = { # New Brunswick
					add_building_construction = {
						type = bunker
						level = 4
						province = 4285
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 4285
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		hidden_effect = {
			466 = { # Quebec
				add_building_construction = {
					type = bunker
					level = 4
					province = 3208
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 7683
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 7810
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 10534
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 12600
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
			468 = { # Saint Lawrence
				add_building_construction = {
					type = bunker
					level = 4
					province = 12149
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					province = 12149
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
			464 = { # Nova Scotia
				add_building_construction = {
					type = coastal_bunker
					level = 4
					province = 7361
					instant_build = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}		
		
		hidden_effect = {
			news_event = { id = better_canada.24 hours = 6 }
		}
	}
}

# The UK Accepts the Referendum (Newfoundland & Labrador)
news_event = {
	id = better_canada.23
	title = better_canada.23.t
	desc = better_canada.23.d
	picture = GFX_news_event_012
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.23.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
				is_in_faction_with = CAN
			}
		}
	}
	option = {
		name = better_canada.23.b
		trigger = { TAG = CAN }
	}
	option = {
		name = better_canada.23.c
		trigger = { TAG = ENG }
	}
	option = {
		name = better_canada.23.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
			}
			is_in_faction_with = CAN
		}
	}
}	

# The UK Refuses the Referendum
news_event = {
	id = better_canada.24
	title = better_canada.24.t
	desc = better_canada.24.d
	picture = GFX_news_event_011
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.24.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.24.b
		trigger = { TAG = CAN }
		
		CAN = { custom_effect_tooltip = CAN_east_claims_forts } # Informs player, this is already done in the previous event
	}
	
	option = {
		name = better_canada.24.c
		trigger = { TAG = ENG }
	}
	
	option = {
		name = better_canada.24.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
			}
			is_in_faction_with = CAN
		}
	}
}

# Canada Demands St. Pierre and Miquelon
country_event = {
	id = better_canada.25
	title = better_canada.25.t
	desc = better_canada.25.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.20.a	# Very Well...
		ai_chance = { factor = 1 }
		
		modifier = {
			factor = 180

			has_war_with = GER
			NOT = { has_war_with = CAN }
		}

		CAN = {
			transfer_state = 730
		}
		hidden_effect = {
			news_event = { id = better_canada.32 hours = 6 }
		}
	}
	
	option = {
		name = better_canada.20.b	#no way 
		ai_chance = { factor = 90 }
		add_political_power = -50
		
		CAN = {
			create_wargoal = {
				type = take_state_focus
				target = FRA
				generator = { 730 }
			}
		}
		hidden_effect = {
			news_event = { id = better_canada.33 hours = 6 }
		}
	}
}

### NEWS EVENTS
# The US Accepts the Demands (Alaska)
news_event = {
	id = better_canada.30
	title = better_canada.30.t
	desc = better_canada.30.d
	picture = GFX_news_event_012
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.30.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = USA
				is_in_faction_with = CAN
			}
		}
	}
	option = {
		name = better_canada.30.b
		trigger = { TAG = CAN }
	}
	option = {
		name = better_canada.30.c
		trigger = { TAG = USA }
	}
	option = {
		name = better_canada.30.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = USA
			}
			is_in_faction_with = CAN
		}
	}
}	

# The US Refuses the Demands
news_event = {
	id = better_canada.31
	title = better_canada.31.t
	desc = better_canada.31.d
	picture = GFX_news_event_011
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.31.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = USA
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.31.b
		trigger = { TAG = CAN }
	}
	
	option = {
		name = better_canada.31.c
		trigger = { TAG = USA }
	}
	
	option = {
		name = better_canada.31.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = USA
			}
			is_in_faction_with = CAN
		}
	}
}

# France Accepts the Demands (St. Pierre & Miquelon)
news_event = {
	id = better_canada.32
	title = better_canada.32.t
	desc = better_canada.32.d
	picture = GFX_news_event_012
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.30.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = FRA
				is_in_faction_with = CAN
			}
		}
	}
	option = {
		name = better_canada.30.b
		trigger = { TAG = CAN }
	}
	option = {
		name = better_canada.30.c
		trigger = { TAG = FRA }
	}
	option = {
		name = better_canada.30.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = FRA
			}
			is_in_faction_with = FRA
		}
	}
}	

# France Refuses the Demands
news_event = {
	id = better_canada.33
	title = better_canada.33.t
	desc = better_canada.33.d
	picture = GFX_news_event_011
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.31.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = FRA
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.31.b
		trigger = { TAG = CAN }
	}
	
	option = {
		name = better_canada.31.c
		trigger = { TAG = FRA }
	}
	
	option = {
		name = better_canada.31.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = FRA
			}
			is_in_faction_with = CAN
		}
	}
}

# The UK Accepts the Demands (Newfoundland & Labrador)
news_event = {
	id = better_canada.40
	title = better_canada.40.t
	desc = better_canada.40.d
	picture = GFX_news_event_012
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.40.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
				is_in_faction_with = CAN
			}
		}
	}
	option = {
		name = better_canada.40.b
		trigger = { TAG = CAN }
	}
	option = {
		name = better_canada.40.c
		trigger = { TAG = ENG }
	}
	option = {
		name = better_canada.40.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
			}
			is_in_faction_with = CAN
		}
	}
}	

# The UK Refuses the Demands
news_event = {
	id = better_canada.41
	title = better_canada.41.t
	desc = better_canada.41.d
	picture = GFX_news_event_011
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.41.a
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.41.b
		trigger = { TAG = CAN }
	}
	
	option = {
		name = better_canada.41.c
		trigger = { TAG = ENG }
	}
	
	option = {
		name = better_canada.41.f
		trigger = {
			NOT = {
				TAG = CAN
				TAG = ENG
			}
			is_in_faction_with = CAN
		}
	}
}

# Maybe we should push the Quebecois to conscription?
country_event = {
	id = better_canada.42
	title = better_canada.42.t
	desc = better_canada.42.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 90
	}	
	
	trigger = {
		NOT = { has_global_flag = quebecois_conscription }
		tag = CAN
		has_war = yes
		OR = {
			has_idea = limited_conscription
			has_idea = service_by_requirement
			has_idea = all_adults_serve
			has_idea = scraping_the_barrel
		}
		has_manpower < 10000
	}
	
	immediate = {
		set_global_flag = quebecois_conscription
	}
	
	option = {
		name = better_canada.42.a	# Perhaps they can be convinced
		ai_chance = { factor = 20 }

		random_list = {
			60 = {
				CAN = {
					country_event = { days = 1 id = better_canada.43 } # They were convinced
				}
			}
			40 = {
				CAN = {
					country_event = { days = 1 id = better_canada.44 } # They were unconvinced
				}
			}
		}
	}
	
	option = {
		name = better_canada.42.b	# Perhaps they can be forced
		ai_chance = { factor = 5 }

		random_list = {
			70 = {
				CAN = {
					country_event = { days = 1 id = better_canada.45 } # They were convinced by force
				}
			}
			30 = {
				CAN = {
					country_event = { days = 1 id = better_canada.46 } # They were angered
				}
				hidden_effect = {
					set_global_flag = quebecois_independence_movement
					set_global_flag = quebecois_independence_movement_angry
				}
			}
		}
	}	
}

country_event = {
	id = better_canada.43
	title = better_canada.43.t
	desc = better_canada.43.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.43.a	# This will help
		ai_chance = { factor = 10 }
		
		remove_ideas = quebecois_no_conscription
		add_ideas = quebecois_minor_conscription
	}	
}

country_event = {
	id = better_canada.44
	title = better_canada.44.t
	desc = better_canada.44.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.44.a	# They leave us with no choice
		ai_chance = { factor = 5 }

		hidden_effect = {
			set_global_flag = quebecois_independence_movement
		}
		random_list = {
			70 = {
				CAN = {
					country_event = { days = 1 id = better_canada.45 } # They were convinced by force
				}
			}
			30 = {
				CAN = {
					country_event = { days = 1 id = better_canada.46 } # They were angered
				}
				hidden_effect = {
					set_global_flag = quebecois_independence_movement_angry
				}
			}
		}		
		
	}

	option = {
		name = better_canada.44.b	# Unfortunate
		ai_chance = { factor = 20 }	

	}	
}

country_event = {
	id = better_canada.45
	title = better_canada.45.t
	desc = better_canada.45.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes

	option = {
		name = better_canada.45.a	# They left us with no choice
		ai_chance = { factor = 10 }	
		
		remove_ideas = quebecois_no_conscription
		add_ideas = quebecois_minor_conscription
	}	
}

country_event = {
	id = better_canada.46
	title = better_canada.46.t
	desc = better_canada.46.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes

	option = {
		name = better_canada.46.a	# This could be bad
		ai_chance = { factor = 10 }	
		
		remove_ideas = quebecois_no_conscription
		add_ideas = quebecois_minor_conscription
	}	
}

country_event = {
	id = better_canada.47
	title = better_canada.48.t
	desc = better_canada.47.d
	picture = GFX_report_event_spain_civil_war_soldiers
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = quebecois_independence_movement_fired }
		has_global_flag = quebecois_independence_movement
		tag = CAN
	}
	
	mean_time_to_happen = {
		days = 1825 # 5 years
		
		modifier = {
			factor = 0.20
			
			has_global_flag = quebecois_independence_movement_angry
		}
	}
	
	immediate = {
		set_global_flag = quebecois_independence_movement_fired
	}
	
	option = {
		name = better_canada.47.a
		
		hidden_effect = {
			remove_ideas = quebecois_no_conscription
			remove_ideas = quebecois_minor_conscription
		}

		QUE = {
			set_capital = 468
			transfer_state = 466
			transfer_state = 468
		}
		create_wargoal = {
			type = take_state_event
			target = QUE
			generator = { 466 468 }
		}
		
		add_opinion_modifier = { target = QUE modifier = que_secession }
		
		random_country = {
			limit = {
				tag = ENG
				is_in_faction_with = CAN 
			}
			add_opinion_modifier = { target = QUE modifier = que_secession_faction_members }
		}
		
		random_country = {
			limit = {
				tag = GER
				is_in_faction_with = CAN 
			}
			add_opinion_modifier = { target = QUE modifier = que_secession_faction_members }
		}
		
		random_country = {
			limit = {
				tag = SOV
				is_in_faction_with = CAN 
			}
			add_opinion_modifier = { target = QUE modifier = que_secession_faction_members }
		}
		
		hidden_effect = {
			random_country = {
				limit = { tag = QUE }
				load_oob = "QUE_REBEL"
				add_manpower = 120000
				set_equipment_fraction = 0.8
				set_national_unity = 1
				add_popularity = {
					ideology = fascism
					popularity = 0.3
				}
				add_opinion_modifier = { target = CAN modifier = que_secession }
			}
			QUE = { country_event = { id = better_canada.53 } } # Keep the nationalist momentum going?
			news_event = { hours = 6 id = better_canada.48 }
		}
	}
	
}

news_event = {
	id = better_canada.48
	title = better_canada.48.t
	desc = better_canada.48.d
	picture = GFX_news_event_011
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = better_canada.48.a
		trigger = {
			NOT = {
				TAG = CAN
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.48.b
		trigger = { TAG = CAN }
	}
	
	option = {
		name = better_canada.48.c
		trigger = {
			NOT = { TAG = CAN }
			is_in_faction_with = CAN
		}
	}
}

country_event = {
	id = better_canada.49
	title = better_canada.49.t
	desc = better_canada.49.d
	picture = GFX_report_event_alberta_oil
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = albertan_oil_discovered }
		date > 1944.1.1
		owns_state = 470
	}
	
	mean_time_to_happen = {
		days = 1095 # 3 years
		
	}
	
	immediate = {
		set_global_flag = albertan_oil_discovered
	}
	
	option = {
		name = better_canada.49.a
	
		add_resource = {
			type = oil
			amount = 42
			state = 470
		}
		470 = {
			add_extra_state_shared_building_slots = 1
			
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = better_canada.50 }
		}
	}
}

news_event = {
	id = better_canada.50
	title = better_canada.50.t
	desc = better_canada.50.d
	picture = GFX_report_event_alberta_oil_news
	
	is_triggered_only = yes
	
	major = yes
	
	option = {
		name = better_canada.50.a
		trigger = {
			NOT = {
				TAG = CAN
				is_in_faction_with = CAN
			}
		}
	}
	
	option = {
		name = better_canada.50.b
		trigger = { TAG = CAN }
	}
	
	option = {
		name = better_canada.50.c
		trigger = {
			NOT = { TAG = CAN }
			is_in_faction_with = CAN
		}
	}
}

country_event = { # Red Rose Tungsten discovery
	id = better_canada.51
	title = better_canada.51.t
	desc = better_canada.51.d
	picture = GFX_report_event_red_rose_tungsten
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = red_rose_tungsten_discovered }
		owns_state = 471
		has_war = yes
	}
	
	mean_time_to_happen = {
		days = 730 # 2 years
	}
	
	immediate = {
		set_global_flag = red_rose_tungsten_discovered
	}
	
	option = {
		name = better_canada.51.a
	
		add_resource = {
			type = tungsten
			amount = 24
			state = 471
		}
	}
}

country_event = { # Japan controls SE Asian Rubber -> Synth Rubber
	id = better_canada.52
	title = better_canada.52.t
	desc = better_canada.52.d
	picture = GFX_report_event_artificial_rubber
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = enemy_has_se_asia }
		owns_state = 276
		random_country = {
			limit = { has_war_with = ROOT }
			controls_state = 336
		}
	}
	
	mean_time_to_happen = {
		days = 365 # 1 year
	}
	
	immediate = {
		set_global_flag = enemy_has_se_asia
	}
	
	option = {
		name = better_canada.52.a
		
		276 = {
			add_extra_state_shared_building_slots = 1

			add_building_construction = {
				type = synthetic_refinery
				level = 1
				instant_build = yes
			}
		}
		if = {
			limit = { NOT = { has_tech = synth_oil_experiments } }
			add_tech_bonus = {
				name = synth_resources
				bonus = 0.50
				uses = 1
				category = industry
			}
		}
	}
}

country_event = {
	id = better_canada.53
	title = better_canada.53.t
	desc = better_canada.53.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes

	option = {
		name = better_canada.53.a	# Embrace Fascism
		ai_chance = { factor = 10 }
		
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
	}

	option = {
		name = better_canada.53.b	# Let the people decide
		ai_chance = { factor = 30 }
		
		random_list = {
			60 = {
				add_ideas = nationalism
			}
			35 = {
				add_popularity = {
					ideology = democratic
					popularity = 0.2
				}				
			}
			5 = {
				add_ideas = internationalism
			}
		}
	}	
}